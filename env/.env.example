# ============================================================================
# LOCAL ENV TEMPLATE
# ============================================================================
# This file documents ALL environment variables used across Tachyon services.
# Copy the appropriate .env.{environment}.example file for your target.
# NEVER commit actual .env files to version control.
# ============================================================================

# --- Shared: Database (PostgreSQL) ---
POSTGRES_HOST=                    # Database host (localhost | DO private URL)
POSTGRES_PORT=5432                # Database port
POSTGRES_DB=                      # Database name (tachyon_dev | tachyon_staging | tachyon_prod)
POSTGRES_USER=                    # Database user
POSTGRES_PASSWORD=                # Database password [SECRET]
POSTGRES_SSL=false                # Enable SSL (false local | true staging/prod)
POSTGRES_MAX_CONNECTIONS=20       # Connection pool size

# --- Shared: Cache/Queue (Redis) ---
REDIS_HOST=                       # Redis host (localhost | DO private URL)
REDIS_PORT=6379                   # Redis port
REDIS_PASSWORD=                   # Redis password [SECRET] (empty for local)
REDIS_TLS=false                   # Enable TLS (false local | true staging/prod)

# --- Shared: Runtime ---
NODE_ENV=development              # Environment (development | staging | production)
LOG_LEVEL=debug                   # Logging level (debug | info | warn | error)

# --- API Service (tachyon-api) ---
PORT=4000                         # API listen port
CORS_ORIGIN=                      # Allowed CORS origin (mobile app URL)
GIT_COMMIT_SHA=                   # Populated at build time via Docker build arg

# --- Worker Service (tachyon-workers) ---
BULLMQ_CONCURRENCY=5             # Worker concurrency limit

# --- DB Migration Runner (tachyon-db) ---
MIGRATION_ENV=local               # Target environment (local | staging | production)

# --- Reserved for Future Features (do not configure yet) ---
# AUTH0_DOMAIN=                   # Feature 5 - Auth (API)
# AUTH0_AUDIENCE=                 # Feature 5 - Auth (API)
# AUTH0_CLIENT_ID=                # Feature 5 - Auth (API)
# OPENAI_API_KEY=                 # Feature 11 - AI (Workers)
# ALPACA_API_KEY=                 # Feature 13 - Broker (API/Workers)
# ALPACA_API_SECRET=              # Feature 13 - Broker (API/Workers)


# ============================================================================
# STAGING ENV TEMPLATE
# ============================================================================
# Actual values are set in DigitalOcean App Platform encrypted env vars.
# This file documents which variables must be configured.
# ============================================================================

POSTGRES_HOST=${tachyon-pg.HOSTNAME}
POSTGRES_PORT=${tachyon-pg.PORT}
POSTGRES_DB=${tachyon-pg.DATABASE}
POSTGRES_USER=${tachyon-pg.USERNAME}
POSTGRES_PASSWORD=${tachyon-pg.PASSWORD}
POSTGRES_SSL=true
POSTGRES_MAX_CONNECTIONS=20

REDIS_HOST=${tachyon-redis.HOSTNAME}
REDIS_PORT=${tachyon-redis.PORT}
REDIS_PASSWORD=${tachyon-redis.PASSWORD}
REDIS_TLS=true

NODE_ENV=staging
LOG_LEVEL=info

PORT=4000
CORS_ORIGIN=https://staging.tachyon.app

BULLMQ_CONCURRENCY=5

MIGRATION_ENV=staging

# ============================================================================
# PROD ENV TEMPLATE
# ============================================================================
# Actual values are set in DigitalOcean App Platform encrypted env vars.
# This file documents which variables must be configured.
# ============================================================================

POSTGRES_HOST=${tachyon-pg-prod.HOSTNAME}
POSTGRES_PORT=${tachyon-pg-prod.PORT}
POSTGRES_DB=${tachyon-pg-prod.DATABASE}
POSTGRES_USER=${tachyon-pg-prod.USERNAME}
POSTGRES_PASSWORD=${tachyon-pg-prod.PASSWORD}
POSTGRES_SSL=true
POSTGRES_MAX_CONNECTIONS=20

REDIS_HOST=${tachyon-redis-prod.HOSTNAME}
REDIS_PORT=${tachyon-redis-prod.PORT}
REDIS_PASSWORD=${tachyon-redis-prod.PASSWORD}
REDIS_TLS=true

NODE_ENV=production
LOG_LEVEL=info

PORT=4000
CORS_ORIGIN=https://tachyon.app

BULLMQ_CONCURRENCY=5

MIGRATION_ENV=production